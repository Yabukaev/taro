<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∞—à–±–æ—Ä–¥ –∫–∞—Ñ–µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body class="bg-gray-100 p-5" id="appBody">
    <div class="fixed top-0 left-0 right-0 bg-white shadow-md p-4 flex justify-between items-center z-50" id="topBar">
        <div>
            <p class="text-gray-800 font-semibold">üìû +7 (999) 123-45-67</p>
            <a href="https://t.me/yabukaev" target="_blank" class="bg-blue-500 text-white px-3 py-2 rounded mt-2 inline-block">Telegram</a>
        </div>
        <button id="loginBtn" class="bg-blue-500 text-white px-4 py-2 rounded">–í–æ–π—Ç–∏</button>
    </div>
    
    <div class="container mx-auto relative mt-24">
        <h1 class="text-3xl font-bold mb-5 text-gray-800">–î–∞—à–±–æ—Ä–¥ –∫–∞—Ñ–µ</h1>
        
        <div id="userInfo" class="hidden bg-white p-5 shadow-lg rounded-lg w-64 mb-5">
            <h2 class="text-lg font-semibold mb-3">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userName"></span></h2>
            <img id="userPhoto" class="rounded-full w-16 h-16 mb-3" src="" alt="–ê–≤–∞—Ç–∞—Ä">
            <p><strong>ID:</strong> <span id="userId"></span></p>
            <p><strong>Username:</strong> <span id="userUsername"></span></p>
        </div>
        
        <div class="bg-white p-5 rounded-xl shadow-lg mb-5">
            <h2 class="text-xl font-semibold mb-3">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–æ–≤</h2>
            <canvas id="qrChart"></canvas>
            <p class="mt-2 text-gray-600">–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: <span id="newUsers">120</span></p>
            <p class="text-gray-600">–í—Å–µ–≥–æ QR: <span id="totalQR">5000</span></p>
            <p class="text-gray-600">–û—Å—Ç–∞–ª–æ—Å—å QR: <span id="remainingQR">3800</span></p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5">
            <div class="bg-white p-5 rounded-xl shadow-lg">
                <h2 class="text-xl font-semibold mb-3">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –ø–æ–ª—É</h2>
                <canvas id="genderChart"></canvas>
            </div>
            <div class="bg-white p-5 rounded-xl shadow-lg">
                <h2 class="text-xl font-semibold mb-3">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É</h2>
                <canvas id="ageChart"></canvas>
            </div>
        </div>

        <div class="bg-white p-5 rounded-xl shadow-lg overflow-x-auto">
            <h2 class="text-xl font-semibold mb-3">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
            <table class="w-full border-collapse border border-gray-300 text-xs md:text-sm lg:text-base">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="border p-2">ID</th>
                        <th class="border p-2">–¢–µ–ª–µ–≥—Ä–∞–º</th>
                        <th class="border p-2">–ò–º—è –§–∞–º–∏–ª–∏—è</th>
                        <th class="border p-2">–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</th>
                        <th class="border p-2">–ö–æ–ª-–≤–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</th>
                        <th class="border p-2">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                        <th class="border p-2">–í–æ–∑—Ä–∞—Å—Ç</th>
                        <th class="border p-2">–ü–æ–ª</th>
                    </tr>
                </thead>
                <tbody id="userTable">
                    <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const tg = window.Telegram.WebApp;
            tg.expand();
            document.body.style.background = tg.themeParams.bg_color || "#f3f4f6";
            
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                const user = tg.initDataUnsafe.user;
                document.getElementById("userName").textContent = user.first_name + (user.last_name ? " " + user.last_name : "");
                document.getElementById("userId").textContent = user.id;
                document.getElementById("userUsername").textContent = user.username || "–ù–µ —É–∫–∞–∑–∞–Ω";
                document.getElementById("userPhoto").src = user.photo_url || "https://via.placeholder.com/64";
                document.getElementById("userInfo").classList.remove("hidden");
                document.getElementById("loginBtn").classList.add("hidden");
            }
            
            document.getElementById("loginBtn").addEventListener("click", function() {
                alert("–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.");
            });
        });
    </script>
</body>
</html>
